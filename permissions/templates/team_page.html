{% extends "base_layout.html" %}

{% block nav %}
<nav class="navbar navbar-expand-lg navbar-dark bg-dark yaksh-nav">
    <a class="navbar-brand" href="{% url 'permissions:home' %}">{{ user | title }}</a>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="nav nav-pills ml-auto">
            <li class="nav-item">
                <a class="nav-link yaksh-navlink" href="#">Logout</a>
            </li>
        </ul>
    </div>
</nav>
{% endblock nav %}

{% block content %}

<div class="container">
    <h2 class="text-center">{{team.name}}</h2>
    <hr>

    <div>
        <h3 class="is-subtitle">Members</h3>
        <ol>
            {% for member in team.members.all %}
                <li>{{member}}</li>
            {% endfor %}
        </ol>
   </div>

   <div>
        <h3 class="is-subtitle">Create role</h3>

        <form action="{% url 'permissions:create_role' %}" method="POST">
            {% csrf_token %}
            <input type="hidden" name="team_id" value={{team.id}}>
            <input type="name" name="role_name" placeholder="Role name">
            <select name="members" multiple>
                {% for member in team.members.all %}
                    <option value="{{member}}">{{member}}</option>
                {% endfor %}
            </select>
            <input type="submit" value="Add role" class="button">
        </form>
   </div>

   <div>
        <h3 class="is-subtitle">Roles</h3>

        <ol>
            {% for role in roles %}
                <li>{{role}}</li>
            {% endfor %}
        </ol>
   </div>

   <div>
        <h3 class="is-subtitle">Courses</h3>

        <form action="{% url 'permissions:add_permission' %}" method="POST">
            {% csrf_token %}
            <input type="hidden" name="team_id" value="{{team.id}}">
            <select name="role">
                {% for role in roles %}
                    <option value="{{role.id}}">{{role}}</option>
                {% endfor %}
            </select>
            <select name="courses">
                {% for course in courses %}
                    <option value="{{course.id}}">{{course}}</option>
                {% endfor %}
            </select>
            <select name="perm_type">
                <option value="read">Read</option>
                <option value="write">Write</option>
            </select>
            <input type="submit" class="button" value="Add permission">
        </form>
   </div>

   <div>
       <h3>Permissions</h3>

       {% for permission in permissions %}
        <p>{{permission}}</p>
       {% endfor %}
   </div>
</div>

{% endblock content %}